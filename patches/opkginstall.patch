--- /feeds/luci/applications/luci-app-opkg/luasrc/controller/opkg.lua
+++ /feeds/luci/applications/luci-app-opkg/luasrc/controller/opkg.lua
@@ -41,3 +41,3 @@
 	local sys = require "luci.sys"
-	local cmd = { "/bin/opkg", "--force-removal-of-dependent-packages" }
+	local cmd = { "/bin/opkg", "--force-removal-of-dependent-packages", "--force-depends" }
 	local pkg = luci.http.formvalue("package")
@@ -59,3 +59,4 @@
 	luci.http.prepare_content("application/json")
+	luci.sys.exec("source /etc/profile.d/opkginstall.sh")
 	luci.http.write_json(sys.process.exec(cmd, true, true))
 end
