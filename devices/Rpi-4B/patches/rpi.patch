--- a/package/kernel/mac80211/broadcom.mk
+++ b/package/kernel/mac80211/broadcom.mk
@@ -449,7 +449,7 @@ define KernelPackage/brcmfmac/config
 
 	config BRCMFMAC_SDIO
 		bool "Enable SDIO bus interface support"
-		default y if TARGET_brcm2708
+		default y if TARGET_bcm27xx
 		default y if TARGET_sunxi
 		default n
 		help

--- /dev/null
+++ b/target/linux/bcm27xx/base-files/lib/preinit/82_set_rpi4_info
@@ -0,0 +1,11 @@
+#!/bin/sh
+
+set_rpi_info() {
+	case "$(board_name)" in
+	raspberrypi,4-model-b)
+		sed -i 's/VHT80/VHT40/g' /lib/wifi/mac80211.sh
+		;;
+	esac
+}
+
+boot_hook_add preinit_main set_rpi_info
